{% extends "JGAdminBundle::layout.html.twig" %}

{% block header %}
    Mes statistiques
{% endblock %}

{% block menu %}
    {% include 'JGAdminBundle:Account:menu.html.twig' %}
{% endblock %}

{% block body %}

    <ol class="breadcrumb">
        <li> <a href="{{ path('account_home_page') }}"> Mon Compte </a> </li>
        <li class="active"> Mes Statistiques </li>
    </ol>

    <div class="actions">
        {% if companies is defined and companies|length > 0 %}
            <a href="{{ path('company_export') }}" class="btn btn-info">
                <i class="fa fa-download" aria-hidden="true"></i> &nbsp; Exporter mes entreprises
            </a>
        {% endif %}
    </div>

    <div class="row">

    <div class="col-sm-12 col-md-6">

    <div class="box companies">
        <div class="box-header">
            <i class="fa fa-building-o" aria-hidden="true"></i> <h3 class="box-title"> Entreprises </h3>
        </div>
        <div class="box-body">
            <div class="boxStat">
                <input class="knob" value="{{ nbCompanies }}" data-readonly="true" data-thickness=".4" data-fgColor="#3498db" data-width="100" data-height="100" />
                <span class="title">Total</span>
            </div>
        </div>
        <div class="box-footer"></div>
    </div>

    <div class="box applications">
        <div class="box-header">
            <i class="fa fa-list-alt" aria-hidden="true"></i> <h3 class="box-title"> Candidatures </h3>
        </div>
        <div class="box-body">
            <div class="boxStat">
                <input class="knob" value="{{ nbApplications }}" data-readonly="true" data-thickness=".4" data-fgColor="#3498db" data-width="100" data-height="100" />
                <span class="title">Total</span>
            </div>
            <div class="boxStat">
                <input class="knob" value="{{ nbApplicationsInProgress }}" data-readonly="true" data-thickness=".4" data-fgColor="#ff6347" data-width="100" data-height="100" />
                <span class="title">En cours</span>
            </div>
            <div class="boxStat">
                <input class="knob" value="{{ nbApplicationsValided }}" data-readonly="true" data-thickness=".4" data-fgColor="#ff6347" data-width="100" data-height="100" />
                <span class="title">Validées</span>
            </div>
            <div class="boxStat">
                <input class="knob" value="{{ nbApplicationsRefused }}" data-readonly="true" data-thickness=".4" data-fgColor="#ff6347" data-width="100" data-height="100" />
                <span class="title">Refusées</span>
            </div>
        </div>
        <div class="box-footer"></div>
    </div>

    <div class="box appointments">
        <div class="box-header">
            <i class="fa fa-calendar" aria-hidden="true"></i> <h3 class="box-title"> Entretiens </h3>
        </div>
        <div class="box-body">
            <div class="boxStat">
                <input class="knob" value="{{ nbAppointments }}" data-readonly="true" data-thickness=".4" data-fgColor="#3498db" data-width="100" data-height="100" />
                <span class="title">Total</span>
            </div>
            <div class="boxStat">
                <input class="knob" value="{{ nbAppointmentsConfirmed }}" data-readonly="true" data-thickness=".4" data-fgColor="#ff6347" data-width="100" data-height="100" />
                <span class="title">Confirmés</span>
            </div>
            <div class="boxStat">
                <input class="knob" value="{{ nbAppointmentsWait }}" data-readonly="true" data-thickness=".4" data-fgColor="#ff6347" data-width="100" data-height="100" />
                <span class="title">En attente</span>
            </div>
            <div class="boxStat">
                <input class="knob" value="{{ nbAppointmentsCancel }}" data-readonly="true" data-thickness=".4" data-fgColor="#ff6347" data-width="100" data-height="100" />
                <span class="title">Annulés</span>
            </div>
        </div>
        <div class="box-footer"></div>
    </div>

    </div>

    <div class="col-sm-12 col-md-6">
        <div class="box download">
            {{ form_start(formDownload, {'attr': {'class': 'with_steps', 'role': 'form'}}) }}
            <div class="box-header">
                <i class="fa fa-download" aria-hidden="true"></i> <h3 class="box-title"> Exporter vos données au format CSV </h3>
            </div>
            <div class="box-body">

                {% if ( formDownload.vars.errors is not empty )
                or ( formDownload.start.vars.errors is not empty )
                or ( formDownload.end.vars.errors is not empty )
                or ( formDownload.type.vars.errors is not empty ) %}
                    <div class="callout callout-danger">
                        {{ form_errors(formDownload) }}
                        {{ form_errors(formDownload.start) }}
                        {{ form_errors(formDownload.end) }}
                        {{ form_errors(formDownload.type) }}
                    </div>
                {% endif %}

                <div class="form-group">
                    {{ form_label(formDownload.help1) }}
                    <div class="input-group col-sm-10">
                        {{ form_widget(formDownload.help1) }}
                    </div>
                </div>
                <div class="form-group">
                    {{ form_label(formDownload.start) }}
                    <div class="input-group col-sm-10">
                        {{ form_widget(formDownload.start) }}
                        <span class="input-group-addon">
                            <span class="fa fa-calendar"></span>
                        </span>
                    </div>
                </div>
                <div class="form-group">
                    {{ form_label(formDownload.end) }}
                    <div class="input-group col-sm-10">
                        {{ form_widget(formDownload.end) }}
                        <span class="input-group-addon">
                            <span class="fa fa-calendar"></span>
                        </span>
                    </div>
                </div>
                <div class="form-group">
                    {{ form_label(formDownload.help2) }}
                    <div class="input-group col-sm-10">
                        {{ form_widget(formDownload.help2) }}
                    </div>
                </div>
                <div class="form-group">
                    {{ form_label(formDownload.init) }}
                    <div class="input-group col-sm-10">
                        {{ form_widget(formDownload.init) }}
                    </div>
                </div>
                <div class="form-group">
                    {{ form_label(formDownload.help3) }}
                    <div class="input-group col-sm-10">
                        {{ form_widget(formDownload.help3) }}
                    </div>
                </div>
                <div class="form-group">
                    {{ form_label(formDownload.type) }}
                    <div class="input-group col-sm-10">
                        {{ form_widget(formDownload.type) }}
                    </div>
                </div>
            </div>
            <div class="box-footer">
                <input type="submit" value="Télécharger le zip" name="btnDownload" id="btnDownload" class="btn btn-pink pull-right" />
            </div>
            {{ form_rest(formDownload) }}
            {{ form_end(formDownload) }}
        </div>

    </div>

    </div>

{% endblock %}

{% block javascripts %}
    <script src="{{ asset('assets/vendor/jquery-knob/dist/jquery.knob.min.js') }}"></script>
    <script type="text/javascript">
        $(function () {
            $('.knob').knob();
        });
    </script>
{% endblock %}